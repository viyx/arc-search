%% example of aleph train file synthesized from task `./data/arc/training/dbc1a6ce.json`
%% to run, start in terminal: `swipl -f aleph_test.pl -g induce,halt`.

% Answer:
% [theory]

% [Rule 1] [Pos cover = 37 Neg cover = 0]
% outp(A,'-8339143352952803963',B,C) :-
%    inp(A,B,C).

% [Rule 2] [Pos cover = 24 Neg cover = 0]
% outp(A,'5687070578108311489',B,C) :-
%    inp(D,B,C), less(D,A), inp(E,B,C), less(A,E).

% [Rule 3] [Pos cover = 45 Neg cover = 0]
% outp(A,'5687070578108311489',B,C) :-
%    inp(A,D,C), less(D,B), inp(A,E,C), less(B,E).

%% Actually the above solution is wrong since in test data we have 3 pixels in one line,
%% so one of them can be recolored by discovered theory.

:- use_module(aleph).
:- aleph.
:- [aleph_prune].
:- style_check(-discontiguous).
:- aleph_set(check_redundant,true).
:- aleph_set(clauselength,6).

% input args order:['x', 'y']
% oupt args order:['x', 'visual_hash', 'y']
:- modeh(*,outp(+nat,#visual_hash,+nat,+ei)).
:- modeb(*,plus1func(+nat,-nat)).
:- modeb(*,minus1func(+nat,-nat)).
:- modeb(*,less(+nat,+nat)).
:- modeb(*,inp(+nat,+nat,-ei)).
:- modeb(*,inp(+nat,-nat,-ei)).
:- modeb(*,inp(-nat,+nat,-ei)).
:- modeb(*,inp(-nat,-nat,-ei)).
:- determination(outp/4,plus1func/2).
:- determination(outp/4,minus1func/2).
:- determination(outp/4,less/2).
:- determination(outp/4,inp/3).

:-begin_bg.
plus1func(A,B):-
    integer(A),
    B is A + 1.

minus1func(A,B):-
    integer(A),
    B is A - 1.

less(A,B):-
    integer(A),
    integer(B),
    A < B.
inp(0,3,1).
inp(1,8,1).
inp(4,1,1).
inp(4,7,1).
inp(6,1,1).
inp(8,6,1).
inp(9,3,1).
inp(0,4,2).
inp(0,9,2).
inp(2,4,2).
inp(2,8,2).
inp(3,2,2).
inp(7,0,2).
inp(7,7,2).
inp(9,6,2).
inp(0,6,3).
inp(0,11,3).
inp(2,10,3).
inp(4,5,3).
inp(5,1,3).
inp(5,9,3).
inp(6,6,3).
inp(6,10,3).
inp(7,2,3).
inp(9,4,3).
inp(9,8,3).
inp(11,4,3).
inp(11,8,3).
inp(0,1,4).
inp(0,4,4).
inp(2,4,4).
inp(2,6,4).
inp(3,0,4).
inp(4,5,4).
inp(5,2,4).
inp(5,7,4).
inp(7,0,4).
:-end_bg.

:-begin_in_pos.
outp(0,'-8339143352952803963',3,1).
outp(1,'5687070578108311489',3,1).
outp(1,'-8339143352952803963',8,1).
outp(2,'5687070578108311489',3,1).
outp(3,'5687070578108311489',3,1).
outp(4,'-8339143352952803963',1,1).
outp(4,'5687070578108311489',2,1).
outp(4,'5687070578108311489',3,1).
outp(4,'5687070578108311489',4,1).
outp(4,'5687070578108311489',5,1).
outp(4,'5687070578108311489',6,1).
outp(4,'-8339143352952803963',7,1).
outp(5,'5687070578108311489',1,1).
outp(5,'5687070578108311489',3,1).
outp(6,'-8339143352952803963',1,1).
outp(6,'5687070578108311489',3,1).
outp(7,'5687070578108311489',3,1).
outp(8,'5687070578108311489',3,1).
outp(8,'-8339143352952803963',6,1).
outp(9,'-8339143352952803963',3,1).
outp(0,'-8339143352952803963',4,2).
outp(0,'5687070578108311489',5,2).
outp(0,'5687070578108311489',6,2).
outp(0,'5687070578108311489',7,2).
outp(0,'5687070578108311489',8,2).
outp(0,'-8339143352952803963',9,2).
outp(1,'5687070578108311489',4,2).
outp(2,'-8339143352952803963',4,2).
outp(2,'5687070578108311489',5,2).
outp(2,'5687070578108311489',6,2).
outp(2,'5687070578108311489',7,2).
outp(2,'-8339143352952803963',8,2).
outp(3,'-8339143352952803963',2,2).
outp(7,'-8339143352952803963',0,2).
outp(7,'5687070578108311489',1,2).
outp(7,'5687070578108311489',2,2).
outp(7,'5687070578108311489',3,2).
outp(7,'5687070578108311489',4,2).
outp(7,'5687070578108311489',5,2).
outp(7,'5687070578108311489',6,2).
outp(7,'-8339143352952803963',7,2).
outp(9,'-8339143352952803963',6,2).
outp(0,'-8339143352952803963',6,3).
outp(0,'5687070578108311489',7,3).
outp(0,'5687070578108311489',8,3).
outp(0,'5687070578108311489',9,3).
outp(0,'5687070578108311489',10,3).
outp(0,'-8339143352952803963',11,3).
outp(1,'5687070578108311489',6,3).
outp(2,'5687070578108311489',6,3).
outp(2,'-8339143352952803963',10,3).
outp(3,'5687070578108311489',6,3).
outp(3,'5687070578108311489',10,3).
outp(4,'-8339143352952803963',5,3).
outp(4,'5687070578108311489',6,3).
outp(4,'5687070578108311489',10,3).
outp(5,'-8339143352952803963',1,3).
outp(5,'5687070578108311489',2,3).
outp(5,'5687070578108311489',3,3).
outp(5,'5687070578108311489',4,3).
outp(5,'5687070578108311489',5,3).
outp(5,'5687070578108311489',6,3).
outp(5,'5687070578108311489',7,3).
outp(5,'5687070578108311489',8,3).
outp(5,'-8339143352952803963',9,3).
outp(5,'5687070578108311489',10,3).
outp(6,'-8339143352952803963',6,3).
outp(6,'5687070578108311489',7,3).
outp(6,'5687070578108311489',8,3).
outp(6,'5687070578108311489',9,3).
outp(6,'-8339143352952803963',10,3).
outp(7,'-8339143352952803963',2,3).
outp(9,'-8339143352952803963',4,3).
outp(9,'5687070578108311489',5,3).
outp(9,'5687070578108311489',6,3).
outp(9,'5687070578108311489',7,3).
outp(9,'-8339143352952803963',8,3).
outp(10,'5687070578108311489',4,3).
outp(10,'5687070578108311489',8,3).
outp(11,'-8339143352952803963',4,3).
outp(11,'5687070578108311489',5,3).
outp(11,'5687070578108311489',6,3).
outp(11,'5687070578108311489',7,3).
outp(11,'-8339143352952803963',8,3).
outp(0,'-8339143352952803963',1,4).
outp(0,'5687070578108311489',2,4).
outp(0,'5687070578108311489',3,4).
outp(0,'-8339143352952803963',4,4).
outp(1,'5687070578108311489',4,4).
outp(2,'-8339143352952803963',4,4).
outp(2,'5687070578108311489',5,4).
outp(2,'-8339143352952803963',6,4).
outp(3,'-8339143352952803963',0,4).
outp(4,'5687070578108311489',0,4).
outp(4,'-8339143352952803963',5,4).
outp(5,'5687070578108311489',0,4).
outp(5,'-8339143352952803963',2,4).
outp(5,'5687070578108311489',3,4).
outp(5,'5687070578108311489',4,4).
outp(5,'5687070578108311489',5,4).
outp(5,'5687070578108311489',6,4).
outp(5,'-8339143352952803963',7,4).
outp(6,'5687070578108311489',0,4).
outp(7,'-8339143352952803963',0,4).
:-end_in_pos.

:-begin_in_neg.
outp(0,'5687070578108311489',3,1).
outp(1,'-8339143352952803963',3,1).
outp(1,'5687070578108311489',8,1).
outp(2,'-8339143352952803963',3,1).
outp(3,'-8339143352952803963',3,1).
outp(4,'5687070578108311489',1,1).
outp(4,'-8339143352952803963',2,1).
outp(4,'-8339143352952803963',3,1).
outp(4,'-8339143352952803963',4,1).
outp(4,'-8339143352952803963',5,1).
outp(4,'-8339143352952803963',6,1).
outp(4,'5687070578108311489',7,1).
outp(5,'-8339143352952803963',1,1).
outp(5,'-8339143352952803963',3,1).
outp(6,'5687070578108311489',1,1).
outp(6,'-8339143352952803963',3,1).
outp(7,'-8339143352952803963',3,1).
outp(8,'-8339143352952803963',3,1).
outp(8,'5687070578108311489',6,1).
outp(9,'5687070578108311489',3,1).
outp(0,'5687070578108311489',4,2).
outp(0,'-8339143352952803963',5,2).
outp(0,'-8339143352952803963',6,2).
outp(0,'-8339143352952803963',7,2).
outp(0,'-8339143352952803963',8,2).
outp(0,'5687070578108311489',9,2).
outp(1,'-8339143352952803963',4,2).
outp(2,'5687070578108311489',4,2).
outp(2,'-8339143352952803963',5,2).
outp(2,'-8339143352952803963',6,2).
outp(2,'-8339143352952803963',7,2).
outp(2,'5687070578108311489',8,2).
outp(3,'5687070578108311489',2,2).
outp(7,'5687070578108311489',0,2).
outp(7,'-8339143352952803963',1,2).
outp(7,'-8339143352952803963',2,2).
outp(7,'-8339143352952803963',3,2).
outp(7,'-8339143352952803963',4,2).
outp(7,'-8339143352952803963',5,2).
outp(7,'-8339143352952803963',6,2).
outp(7,'5687070578108311489',7,2).
outp(9,'5687070578108311489',6,2).
outp(0,'5687070578108311489',6,3).
outp(0,'-8339143352952803963',7,3).
outp(0,'-8339143352952803963',8,3).
outp(0,'-8339143352952803963',9,3).
outp(0,'-8339143352952803963',10,3).
outp(0,'5687070578108311489',11,3).
outp(1,'-8339143352952803963',6,3).
outp(2,'-8339143352952803963',6,3).
outp(2,'5687070578108311489',10,3).
outp(3,'-8339143352952803963',6,3).
outp(3,'-8339143352952803963',10,3).
outp(4,'5687070578108311489',5,3).
outp(4,'-8339143352952803963',6,3).
outp(4,'-8339143352952803963',10,3).
outp(5,'5687070578108311489',1,3).
outp(5,'-8339143352952803963',2,3).
outp(5,'-8339143352952803963',3,3).
outp(5,'-8339143352952803963',4,3).
outp(5,'-8339143352952803963',5,3).
outp(5,'-8339143352952803963',6,3).
outp(5,'-8339143352952803963',7,3).
outp(5,'-8339143352952803963',8,3).
outp(5,'5687070578108311489',9,3).
outp(5,'-8339143352952803963',10,3).
outp(6,'5687070578108311489',6,3).
outp(6,'-8339143352952803963',7,3).
outp(6,'-8339143352952803963',8,3).
outp(6,'-8339143352952803963',9,3).
outp(6,'5687070578108311489',10,3).
outp(7,'5687070578108311489',2,3).
outp(9,'5687070578108311489',4,3).
outp(9,'-8339143352952803963',5,3).
outp(9,'-8339143352952803963',6,3).
outp(9,'-8339143352952803963',7,3).
outp(9,'5687070578108311489',8,3).
outp(10,'-8339143352952803963',4,3).
outp(10,'-8339143352952803963',8,3).
outp(11,'5687070578108311489',4,3).
outp(11,'-8339143352952803963',5,3).
outp(11,'-8339143352952803963',6,3).
outp(11,'-8339143352952803963',7,3).
outp(11,'5687070578108311489',8,3).
outp(0,'5687070578108311489',1,4).
outp(0,'-8339143352952803963',2,4).
outp(0,'-8339143352952803963',3,4).
outp(0,'5687070578108311489',4,4).
outp(1,'-8339143352952803963',4,4).
outp(2,'5687070578108311489',4,4).
outp(2,'-8339143352952803963',5,4).
outp(2,'5687070578108311489',6,4).
outp(3,'5687070578108311489',0,4).
outp(4,'-8339143352952803963',0,4).
outp(4,'5687070578108311489',5,4).
outp(5,'-8339143352952803963',0,4).
outp(5,'5687070578108311489',2,4).
outp(5,'-8339143352952803963',3,4).
outp(5,'-8339143352952803963',4,4).
outp(5,'-8339143352952803963',5,4).
outp(5,'-8339143352952803963',6,4).
outp(5,'5687070578108311489',7,4).
outp(6,'-8339143352952803963',0,4).
outp(7,'5687070578108311489',0,4).
:-end_in_neg.
